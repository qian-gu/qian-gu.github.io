
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://qian-gu.github.io/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark)"
    href="https://qian-gu.github.io/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark)"
          href="https://qian-gu.github.io/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
          href="https://qian-gu.github.io/theme/pygments/monokai.min.css">


  <link rel="stylesheet"
        type="text/css"
        href="https://qian-gu.github.io/theme/stork/stork.css" />

  <link rel="stylesheet" type="text/css" href="https://qian-gu.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://qian-gu.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://qian-gu.github.io/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="/static/custom.css">

  <link rel="shortcut icon" href="https://qian-gu.github.io/images/favicon_64x64.ico" type="image/x-icon">
  <link rel="icon" href="https://qian-gu.github.io/images/favicon_64x64.ico" type="image/x-icon">

  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#333333">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#333333">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#333333">

  <link href="https://qian-gu.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Qian's Blog Atom">


<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48826831-1', 'auto');
  ga('send', 'pageview');
</script>






 

<meta name="author" content="Qian Gu" />
<meta name="description" content="嵌入式软件开发流程笔记" />
<meta name="keywords" content="Baremetal">


  <meta property="og:site_name" content="Qian's Blog"/>
  <meta property="og:title" content="嵌入式软件开发基本知识"/>
  <meta property="og:description" content="嵌入式软件开发流程笔记"/>
  <meta property="og:locale" content="en"/>
  <meta property="og:url" content="https://qian-gu.github.io/drafts/embedded-software-dev-basic.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2021-06-22 14:51:00+08:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="https://qian-gu.github.io/author/qian-gu.html">
  <meta property="article:section" content="Embedded"/>
  <meta property="article:tag" content="Baremetal"/>
  <meta property="og:image" content="https://qian-gu.github.io/images/logo.png">

  <title>Qian's Blog &ndash; 嵌入式软件开发基本知识</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-1821536199377100",
      enable_page_level_ads: true
    });
  </script>

</head>
<body >

<aside>
  <div>
    <a href="https://qian-gu.github.io/">
      <img src="https://qian-gu.github.io/images/logo.png" alt="Qian Gu" title="Qian Gu">
    </a>

    <h1>
      <a href="https://qian-gu.github.io/">Qian Gu</a>
    </h1>

    <p>Read >> Think >> Write</p>

    <div class="stork">
      <input class="stork-input" type="text" autocomplete="off" name="q" data-stork="sitesearch" placeholder="Search..." onclick="loadStorkIndex()"/>
      <div class="stork-output" data-stork="sitesearch-output"></div>
    </div>

    <nav>
      <ul class="list">


            <li>
              <a target="_blank"
                 href="https://qian-gu.github.io/pages/about-me.html#about-me">
                About Me
              </a>
            </li>

      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-envelope"
rel="me"           href="mailto:guqian110@163.com"
           target="_blank">
          <i class="fa-solid fa-envelope"></i>
        </a>
      </li>
      <li>
        <a class="sc-github"
           href="https://github.com/qian-gu"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-twitter"
           href="https://twitter.com/qian_gu"
           target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
      <li>
        <a class="sc-rss"
           href="/feeds/all.atom.xml"
           target="_blank">
          <i class="fa-solid fa-rss"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="https://qian-gu.github.io/">Home</a>

  <a href="/authors.html">Authors</a>
  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="https://qian-gu.github.io/feeds/all.atom.xml">Atom</a>

</nav>

<article class="single">
  <header>
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.1.0/css/all.css" rel="stylesheet">
      
    <h1 id="embedded-software-dev-basic">嵌入式软件开发基本知识</h1>
    <p>
      Posted on 2021-06-22 14:51 in <a href="https://qian-gu.github.io/category/embedded.html">Embedded</a>

    </p>
    <div class="tag-cloud">
      <p>
        <a href="https://qian-gu.github.io/tag/baremetal.html">Baremetal</a>
      </p>
    </div>
  </header>



  <div>
    <div class="admonition note">
<p class="admonition-title">Note</p>
<p>主要以 GCC 为例，LLVM 的内容以后再补充。</p>
</div>
<h2 id="gcc">GCC 简介</h2>
<p><code>GCC</code> 一般有两个含义：GNU Compiler Collection 和 GNU C Compiler，这两个含义可以根据上下文分辨出来。顾名思义 GCC 作为 collection 概念时并不是一个单独的程序，而是很多程序的集合，所以一般也叫做 “GCC 工具链 ”。</p>
<div class="math">$$GCC 工具链 = GCC + CRT + Binutils + GDB$$</div>
<p>编译可以分为两类：</p>
<ul>
<li>本地编译：在一个平台上编译该平台运行的程序</li>
<li>交叉编译：在一个平台上编译其他平台上的程序，主要用于嵌入式系统开发</li>
</ul>
<h3 id="_1">命名规则</h3>
<p>下载源码编译的过程略，主要记录一下 GCC 命名规则：arch[-vendor][-os][-(gnu)eabi]</p>
<ul>
<li>arch：表示体系架构，如 arm, riscv64</li>
<li>vendor：工具链提供商</li>
<li>os：目标操作系统</li>
<li>eabi：嵌入式应用二进制接口 embedded application binary interface </li>
</ul>
<p>在 RSIC-V 下，几种名字的含义：</p>
<ul>
<li><code>riscv64-unknow-linux-gnu-</code> 作为前缀，表示提供商未知，适用于 RSIC-V 体系结构，默认按照 64bit 编译，使用 linux 下的 glibc 作为 CRT</li>
<li><code>riscv32-unknow-elf-</code> 作为前缀，表示提供商未知，适用于 RSIC-V 体系结构，默认按照 32bit 编译，使用 newlib 作为 CRT</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>前缀中的数字 32 和 64 与运行在 32/64bit 电脑上无关，而是指没有明确指定 -march 和 -mabi 时默认按照哪种位宽来编译程序。</p>
</div>
<h3 id="_2">常见编译选项</h3>
<p><strong><code>-march</code></strong></p>
<p>因为 RISC-V 是模块化的，所以要指定具体使用那些子集，比如 <code>-march=rv32imafdc</code>，<code>-march=rv64gc</code> 等。</p>
<p><strong><code>-mabi</code></strong></p>
<p>指定 ABI 调用规则，主要包含整型和浮点两类，比如 <code>-mabi=ilp32</code>，<code>-mabi=lp32d</code> 等。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>-march 和 -mabi 组合必须相互兼容，否则会报错。比如 -march=rv32imac -mabi=lp32d 这个组合，march 指定了不会使用 F 和 D 子集，但是 mabi 又表示要支持 F 或者 D 子集，相互矛盾。</p>
</div>
<p><strong><code>-mcmodel</code></strong></p>
<p>有效值有两个：</p>
<ul>
<li><code>medlow</code>：表示程序寻址范围只能固定在 [-2G, 2G] 之间</li>
<li><code>medany</code>：表示程序寻址范围可以是任意的 4G 内</li>
</ul>
<h2 id="crt">CRT</h2>
<p>C 语言标准主要由两部分组成：C 语法描述 + C 标准库。其中 C 标准库定义了一组标准头文件，每个头文件包含了一些函数、变量、类型声明、宏定义。比如常用的 <code>printf</code> 函数就是定义在 <code>stdio.h</code> 这个文件中。</p>
<p>C 语言标准只定义了头文件，并不提供实现，所以在编译的时候，我们需要提供一个 C 运行时库（C Runtime Library, <code>CRT</code>）。Linux 下最常见的 CRT 是 <code>glibc</code> (GNU C Library)，它本身是 GNU 旗下的，后来成为 Linux 的标准 CRT，主要分布在 /lib 和 /usr/lib 目录下，文件名以 .so 结尾。Linux CRT 除了 glibc 之外，还有 uclibc 和 klibc 等，但是 glibc 使用最广泛。在嵌入式系统中常用的是 <code>newlibc</code>。</p>
<p>glibc 除了实现 C 标准之外，还封装了操作系统提供的系统服务，即系统调用的服务，所以和操作系统耦合的很紧，作为操作系统的一部分，安装的时候就自带了。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>对于 C++ 来说，最常用的 CRT 是 <code>libstdc++</code>，它一般和 GCC 绑定在一起，安装 GCC 的时候会把 libstdc++ 也安装上。libstdc++ 不会直接和系统内核打交道，对于系统级别的事件，libstdc++ 会通过 glibc 与内核通信。</p>
</div>
<h2 id="_3">软件编译过程</h2>
<p>主要包含 4 个步骤：</p>
<ol>
<li>预处理 preprocessing</li>
<li>编译 compilation</li>
<li>汇编 assembly</li>
<li>链接 linking</li>
</ol>
<h3 id="_4">预处理</h3>
<p>完成的工作有：</p>
<ul>
<li>将 <code>#define</code> 删除，展开所有宏定义，处理所有条件编译，比如 <code>#ifdef</code></li>
<li>处理 <code>#include</code>，把被包含的文件插入该位置</li>
<li>删除所有注释</li>
<li>添加行号和文件标识</li>
<li>保留所有 <code>#pragma</code></li>
</ul>
<div class="highlight"><pre><span></span><code>#!shell
gcc -E hello.c -o hello.i
cpp hello.c -o hello.i
</code></pre></div>

<p>可以用 vim 打开看看 hello.i 的内容。</p>
<h3 id="_5">编译</h3>
<p>完成的工作：对预处理的结果进行词法分析、语法分析、语义分析和优化，产生对应的汇编代码。</p>
<div class="highlight"><pre><span></span><code>#!shell
gcc -S hello.i -o hello.s
</code></pre></div>

<p>可以用 vim 打开看看 hello.s 的内容。</p>
<h3 id="_6">汇编</h3>
<p>对照汇编指令表，将编译结果一一翻译成汇编指令。</p>
<div class="highlight"><pre><span></span><code>#!shell
gcc -c hello.s -o hello.o
as hello.s -o hello.o
</code></pre></div>

<p>汇编的结果是 ELF 格式的可重定向目标文件，没法直接用 vim 打开查看，可以用 <code>readelf</code> 来查看相关信息。</p>
<h3 id="_7">链接</h3>
<p>一般程序都会分成多个源文件，每个源文件都可以编译出对应的目标文件，这些目标文件再经过链接才形成最终的可执行文件。即使程序只有一个源文件，一般都会调用标准库，所以也需要链接器把系统提供的 CRT 代码链接到一起。</p>
<div class="highlight"><pre><span></span><code>#!shell
gcc hello.c -o hello
# 直接使用 ld hello.o -o hello 会报错，因为没有明确指出其需要的依赖库，引导程序和链接脚本
</code></pre></div>

<p>链接分为两类：</p>
<ul>
<li>
<p>静态链接，在编译阶段把依赖库代码复制到可执行程序中，最终的体积比较大</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>gcc<span class="w"> </span>-static<span class="w"> </span>hello.c<span class="w"> </span>-o<span class="w"> </span>hello
size<span class="w"> </span>hello
ldd<span class="w"> </span>hello
</code></pre></div></td></tr></table></div>

</li>
<li>
<p>动态链接：在链接阶段只加入一些描述信息，在程序执行的时候，再从系统中把对应代码加载到内存中</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>gcc<span class="w"> </span>hello.c<span class="w"> </span>-o<span class="w"> </span>hello.o
size<span class="w"> </span>hello
ldd<span class="w"> </span>hello
</code></pre></div></td></tr></table></div>

</li>
</ul>
<h3 id="elf">ELF</h3>
<p><code>ELF</code>(Executable and Linkable Format) 主要有 3 种：</p>
<ul>
<li>Relocatable 可重定向文件：包含代码和适当的数据，用来和其他目标文件一起创建可执行文件 or 共享目标文件</li>
<li>Executable 可执行文件：保存可执行的程序，如 bash</li>
<li>Shared 共享文件：共享库 .so 文件</li>
</ul>
<p>ELF 的文件格式示意图略，常见的几个 section 含义如下：</p>
<table>
<thead>
<tr>
<th>section</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>.text</td>
<td>已编译程序的指令代码段</td>
</tr>
<tr>
<td>.rodata</td>
<td>只读数据</td>
</tr>
<tr>
<td>.data</td>
<td>已初始化的 <code>全局变量</code> + <code>静态局部变量</code></td>
</tr>
<tr>
<td>.bss</td>
<td>未初始化的 <code>全局变量</code> + <code>静态局部变量</code></td>
</tr>
<tr>
<td>.debug</td>
<td>调试符号表，辅助 debugger</td>
</tr>
</tbody>
</table>
<p>可以通过 <code>readelf</code> 命令来查看 ELF 文件的信息</p>
<h1 id="shell">!shell</h1>
<p>readelf -a hello</p>
<p>因为 ELF 无法直接用文本编辑器打开，所以一般通过反汇编的方式查看。</p>
<h3 id="_8">反汇编</h3>
<div class="highlight"><pre><span></span><code>#!shell
objdump -D hello &gt; hello.dump
# 用 -S 可以将 C 和汇编混合显示，gcc 需要加上 -g 选项
gcc -g hello.c -o hello
objdump -S hello &gt; hello.dump
</code></pre></div>

<h2 id="_9">嵌入式软件的特点</h2>
<p>前面以 hello world 为例简单说明了 Linux 环境下的编译过程，在这些基础上，嵌入式开发还有一些其他特点：</p>
<ul>
<li>交叉编译 + 远程调试</li>
<li>需要自己定义引导程序</li>
<li>需要自己定义中断服务程序</li>
<li>主要注意减小代码体积</li>
<li>需要移植 printf</li>
<li>使用 Newlib 作为 CRT</li>
</ul>
<h3 id="_10">交叉编译 + 远程调试</h3>
<p>嵌入式平台本身资源很有限，无法将各种开发工具都安装在上面，所以一般都是在 PC 用 GCC 开发编译，最后将编译好的二进制文件下载到嵌入式平台运行。调试的时候同理，用 PC 上的 GDB 进行远程调试。</p>
<h3 id="_11">定义引导程序</h3>
<p>不能依赖 OS 来做这些 “ 脏活累活 ”，一般包含初始化硬件、设置异常和中断向量表、复制程序到 SRAM、代码重映射、最后跳转到 main 函数入口这些步骤。</p>
<h3 id="_12">定义中断服务程序</h3>
<h3 id="_13">减小代码体积</h3>
<p>常见方法：</p>
<ul>
<li>使用 <code>newlib-nano</code></li>
<li>正式版本程序不包含 printf 等大型函数</li>
<li>如果一定要用，自己实现简化版 printf</li>
<li>在 C/C++ 语法层次和程序开发层次进行优化</li>
</ul>
<h3 id="newlib">移植 newlib</h3>
<p>为了适应各种嵌入式系统，newlib 将库函数的实现与 OS、底层硬件分层隔离，newlib 的所有库函数都依赖 20 个桩函数，这 20 个桩函数完成具体 OS 和底层硬件相关的功能。所以移植 newlib 的关键就是找到 / 实现这些桩函数。</p>
<h3 id="bsp">BSP</h3>
<p>上述的这些特点最终会打包成 BSP 的形式来实现，包含了：</p>
<ul>
<li>底层硬件设备的地址分配信息</li>
<li>底层硬件设备的驱动函数</li>
<li>系统的引导程序</li>
<li>中断和异常服务程序</li>
<li>系统的链接脚本</li>
<li>使用 newlib 时提供桩函数的实现</li>
</ul>
<h2 id="sdk">SDK</h2>
<p>为了方便用户使用，一般 MCU 提供商会进一步打包，提供 SDK 方便用户开发。SDK 不是一个软件，而是一个开发环境，一般包含了：</p>
<ul>
<li>BSP</li>
<li>Makefile</li>
<li>示例 software</li>
<li>常用脚本</li>
</ul>
<h2 id="_14">汇编语言程序设计</h2>
<p>虽然现在编译器已经很厉害了，绝大数时间我们都是用高级语言开发，但是在某些特殊场合，比如底层驱动、引导程序、高性能算法库等，汇编还是有着重要作用。</p>
<p>一般的 GCC 汇编语法和 C 与汇编的混合编程略，查询 GCC 手册即可。</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'blue ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>


  <div class="neighbors">
  </div>


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-1821536199377100"
         data-ad-slot="4843941849"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Gitalk -->
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://qian-gu.github.io/theme/gitalk/md5.min.js"></script>
<script>
var gitalk = new Gitalk({
  clientID: '4b3de26a6e80be727416',
  clientSecret: '993d79339c842fc56d9739ef268f38806dc93f50',
  repo: 'qian-gu.github.io',
  owner: 'qian-gu',
  admin: ['qian-gu'],
  id: md5(location.href),
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- End Gitalk -->
</article>

<footer>
<p>
  &copy; 2025  - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://qian-gu.github.io/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="ligtht"
          type="text/javascript">
  </script>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://qian-gu.github.io/theme/img/cc/by-sa.png"
         width="80"
         height="15"/>
  </a>
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Qian's Blog ",
  "url" : "https://qian-gu.github.io",
  "image": "https://qian-gu.github.io/images/logo.png",
  "description": "Qian's Thoughts and Writings"
}
</script><a href="https://github.com/qian-gu/qian-gu.github.io" target="_blank" class="github-corner" aria-label="View source on Github">
    <svg width="80"
         height="80"
         viewBox="0 0 250 250"
         style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
         aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor"
              style="transform-origin: 130px 106px;"
              class="octo-arm">
        </path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor"
              class="octo-body">
        </path>
    </svg>
</a>
  <script>
    window.loadStorkIndex = function () {
      stork.initialize("https://qian-gu.github.io/theme/stork/stork.wasm")
      stork.register("sitesearch", "https://qian-gu.github.io/search-index.st", { showProgress: false });
    }
  </script>
  <script src="https://qian-gu.github.io/theme/stork/stork.js"></script>

</body>
</html>